!function(t){"use strict";function e(){var e=a.clientHeight,i=t.innerHeight;return i>e?i:e}function i(){return t.pageYOffset||a.scrollTop}function n(t){var e=0,i=0;do isNaN(t.offsetTop)||(e+=t.offsetTop),isNaN(t.offsetLeft)||(i+=t.offsetLeft);while(t=t.offsetParent);return{top:e,left:i}}function o(t,o){var s=t.offsetHeight,r=i(),a=r+e(),l=n(t).top,c=l+s,o=o||0;return a>=l+s*o&&c-s*o>=r}function s(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function r(t,e){this.el=t,this.options=s(this.defaults,e),this._init()}var a=t.document.documentElement;r.prototype={defaults:{minDuration:0,maxDuration:0,viewportFactor:0},_init:function(){this.items=Array.prototype.slice.call(document.querySelectorAll("#"+this.el.id+" > li")),this.itemsCount=this.items.length,console.log(this.itemsCount),this.itemsRenderedCount=0,this.didScroll=!1;var e=this;imagesLoaded(this.el,function(){new Masonry(e.el,{itemSelector:"li",transitionDuration:0}),Modernizr.cssanimations&&(e.items.forEach(function(t){o(t)&&(e._checkTotalRendered(),classie.add(t,"shown"))}),t.addEventListener("scroll",function(){e._onScrollFn()},!1),t.addEventListener("resize",function(){e._resizeHandler()},!1))})},_onScrollFn:function(){var t=this;this.didScroll||(this.didScroll=!0,setTimeout(function(){t._scrollPage()},60))},_scrollPage:function(){var t=this;this.items.forEach(function(n){classie.has(n,"shown")||classie.has(n,"animate")||!o(n,t.options.viewportFactor)||setTimeout(function(){var o=i()+e()/2;if(t.el.style.WebkitPerspectiveOrigin="50% "+o+"px",t.el.style.MozPerspectiveOrigin="50% "+o+"px",t.el.style.perspectiveOrigin="50% "+o+"px",t._checkTotalRendered(),t.options.minDuration&&t.options.maxDuration){var s=Math.random()*(t.options.maxDuration-t.options.minDuration)+t.options.minDuration+"s";n.style.WebkitAnimationDuration=s,n.style.MozAnimationDuration=s,n.style.animationDuration=s}classie.add(n,"animate")},25)}),this.didScroll=!1},_resizeHandler:function(){function t(){e._scrollPage(),e.resizeTimeout=null}var e=this;this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(t,1e3)},_checkTotalRendered:function(){++this.itemsRenderedCount,this.itemsRenderedCount===this.itemsCount&&t.removeEventListener("scroll",this._onScrollFn)}},t.AnimOnScroll=r}(window),function(t){"use strict";function e(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")}function i(t,e){var i=n(t,e)?s:o;i(t,e)}var n,o,s;"classList"in document.documentElement?(n=function(t,e){return t.classList.contains(e)},o=function(t,e){t.classList.add(e)},s=function(t,e){t.classList.remove(e)}):(n=function(t,i){return e(i).test(t.className)},o=function(t,e){n(t,e)||(t.className=t.className+" "+e)},s=function(t,i){t.className=t.className.replace(e(i)," ")}),t.classie={hasClass:n,addClass:o,removeClass:s,toggleClass:i,has:n,add:o,remove:s,toggle:i}}(window),function(){$("#menuToggle, .menu-close").on("click",function(){$("#menuToggle").toggleClass("active"),$("body").toggleClass("body-push-toleft"),$("#theMenu").toggleClass("menu-open")}),$("#main-portfolio")&&(console.log("doscroll"),new AnimOnScroll(document.getElementById("main-portfolio-list"),{minDuration:.4,maxDuration:.7,viewportFactor:.2}))}(jQuery);
